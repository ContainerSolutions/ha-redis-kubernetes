apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: redis-cli
spec:
  selector:
    matchLabels:
      app: redis-cli # has to match .spec.template.metadata.labels
  serviceName: "redis-cli"
  replicas: 1 # by default is 1
  template:
    metadata:
      labels:
        app: redis-cli # has to match .spec.selector.matchLabels
    spec:
      containers:
      - name: redis-cli
        image: redis:5.0.13
        command: ["sleep", "86400"]


## redis-cli --cluster rebalance ${REDIS_HOST}:${REDIS_PORT} --cluster-use-empty-masters --cluster-weight 0e79e3d413481c44c8084d87b36faeb5d33d9ae4=0
# redis-cli --cluster check ${REDIS_HOST}:${REDIS_PORT}
# redis-cli --cluster reshard ${REDIS_HOST}:${REDIS_PORT} --cluster-slots 16384 --cluster-yes
# 

# redis-cli --cluster fix ONE_OF_HEALTHY_NODE_IP:PORT --cluster-fix-with-unreachable-masters

# 

# bcf12a4c02f6a7a58ababa85590d31bcdddfe7d8 10.244.1.216:7000@17000 master - 0 1630669981566 13 connected 6554-9829 13112 13117 13144 13148 13154 13162-13163 13174 13179 13182 13188 13195 13201 13209 13211 13213 13222 13226 13231-13232 13240 13265 13274 13277-13278 13280-13281 13283-13284 13289 13294 13300-13301 13310 13312 13315-13316 13334-13337 13339 13345 13355 13359 13380 13384 13394 13396 13399 13401-13402 13414-13415 13426 13428 13436-13437 13447 13450 13475 13477 13481 13485 13500-13501 13504-13505 13508-13509 13513 13524 13532 13536-13537 13540 13554-13556 13559-13560 13570 13580 13582 13587 13594-13595 13610 13612 13618 13622 13624 13626 13629 13632 13645 13650-13651 13661 13664 13666 13670 13673-13674 13684 13689-13690 13705 13707 13717 13722 13724 13738 13760 13762 13767-13768 13772 13774 13792 13794 13800 13806 13808 13819 13826 13828 13833 13835 13841 13843 13846 13871 13879 13884 13892 13894 13899 13901 13903-13905 13908 13914 13921 13928 13930 13947 13963 13972 13993 13997 14009 14021 14030-14031 14041-14043 14046 14050 14052 14054 14089 14094 14098-14099 14106 14108 14111 14116 14119 14124 14129 14132 14142 14145 14161 14192 14196 14199 14208 14210 14212-14213 14230 14234 14245 14251 14255 14259 14268 14274-14275 14278 14288 14297 14303 14307 14311-14312 14314 14333 14347-14348 14355 14362 14371 14373 14383 14387 14398 14401-14402 14413 14417 14427 14429 14439 14452 14466-14467 14478 14480 14482 14489 14510 14526 14539 14542 14548 14564 14566 14569 14576 14581-14583 14585 14604 14611 14614 14623 14626 14631 14639 14641 14645 14653 14657 14666 14675 14685 14703 14705 14710 14722 14725-14726 14731 14735 14738 14745 14750 14757-14758 14763-14764 14775 14780 14794 14799 14806 14811 14816 14827 14830-14831 14833 14835-14836 14839 14841-14843 14870-14872 14876 14882 14897 14907 14910 14918 14920 14941 14952 14956 14960 14966 14979 14984 15001-15002 15007 15009-15010 15028 15032 15038-15039 15046 15051 15055 15061 15078 15082 15091 15103 15110 15113 15116-15117 15125 15133 15153 15163 15171 15173 15175 15185 15193 15199-15200 15208 15222 15230 15234 15242-15243 15247 15269 15271 15275 15277-15278 15285-15287 15300-15301 15308 15310 15312-15313 15318 15322-15324 15334 15344 15358 15370-15371 15381 15401 15407 15410 15416 15423 15425 15431 15438 15449 15456 15464 15488 15501 15504 15507 15510 15513 15516 15526 15532 15544 15551 15556 15558 15561 15564 15566 15573 15583 15589 15602-15604 15612 15619 15623 15645 15648 15653 15657 15692 15696 15699 15708 15716 15726 15742 15744 15751 15762 15772-15773 15775 15781 15783 15795 15799-15800 15803 15819 15826 15831 15837 15839 15841 15851 15858 15862 15874 15885 15887 15898 15902 15907 15913 15931 15948 15963 15969 15974 15983 15988-15990 16009 16028-16029 16031 16062-16063 16066 16078 16083 16098 16126 16131 16133 16137 16140 16171 16179 16181 16183 16199 16205 16211 16215 16226 16230 16269 16273 16289 16311-16312 16331 16337 16357 16377 16380
# 0cbe50347bd0591e89c019a83a95cf4fd7de8ae7 10.244.1.174:7000@17000 myself,master - 0 1630669982000 15 connected 0-3276 13109-13111 13116 13118 13124-13126 13128 13130-13138 13140-13143 13146-13147 13149-13150 13153 13155-13157 13159 13161 13166 13170-13171 13175 13177 13180-13181 13183 13189 13191 13193 13196-13197 13199-13200 13202-13204 13207 13214 13216-13219 13221 13224-13225 13227 13229-13230 13233 13235 13238-13239 13242 13245-13249 13252-13254 13256-13259 13263 13266 13269 13271-13272 13275 13279 13287 13291-13292 13295 13298-13299 13302-13304 13307 13309 13311 13313-13314 13317-13321 13327-13328 13331-13332 13340 13342 13347-13350 13353-13354 13357-13358 13360-13362 13364 13366-13369 13373 13375-13377 13379 13381-13382 13386-13387 13389 13393 13398 13403 13407-13408 13412 13418-13425 13427 13430-13431 13433 13440-13441 13444-13445 13451-13452 13454 13458 13460-13461 13464-13465 13470-13472 13474 13476 13480 13488 13490 13495 13497-13498 13502 13506-13507 13511-13512 13514 13518 13520 13522 13528 13530 13533 13538 13541-13544 13546 13548-13550 13553 13557-13558 13561 13563 13565-13566 13568 13571-13573 13576 13579 13581 13583-13584 13586 13589-13590 13593 13598 13601 13603-13604 13608 13611 13613-13616 13619 13621 13623 13625 13627 13630 13633 13638 13640 13648 13652 13654-13655 13659 13662 13665 13667 13669 13678-13679 13681-13683 13686 13691 13696-13697 13699-13700 13702 13704 13708 13710-13711 13714-13716 13718-13719 13723 13726 13729 13732 13734 13737 13739 13741 13743 13748-13750 13755 13758-13759 13761 13763 13765 13771 13773 13775-13776 13778 13780-13784 13786 13791 13795 13799 13801-13804 13807 13809 13811 13813-13814 13816 13821 13823-13824 13827 13830 13832 13836 13844 13847 13854-13855 13857 13860 13867 13869 13872 13875-13876 13882-13883 13885-13891 13893 13895-13898 13902 13906 13910-13913 13918-13919 13923-13925 13927 13929 13935-13936 13938-13939 13941 13943-13946 13949-13951 13955-13958 13962 13964 13966 13968-13970 13973-13974 13977-13978 13980 13983 13987 13989 13994 13996 13998 14001-14002 14004-14006 14008 14010-14011 14013 14015-14019 14022-14024 14026 14032 14035-14036 14039 14045 14047-14049 14053 14055-14060 14063-14065 14068 14072-14073 14075-14076 14079 14081-14082 14084-14086 14090 14093 14095-14097 14100-14104 14107 14113-14114 14117 14121 14123 14126 14128 14130 14135-14138 14140 14144 14146-14150 14155-14158 14162 14164 14166-14168 14170-14171 14174-14175 14177-14178 14180-14181 14183 14185-14188 14190-14191 14193 14195 14198 14200 14204-14207 14215-14217 14222 14224 14226 14228 14231-14232 14236-14238 14240-14242 14244 14246 14249-14250 14252 14256 14258 14260-14261 14264 14266-14267 14269 14272 14276-14277 14279 14281 14289 14291-14295 14302 14305-14306 14309-14310 14315-14322 14324-14325 14327-14329 14331-14332 14334-14336 14342 14344 14349 14352 14354 14358-14359 14363 14365-14368 14370 14372 14376-14378 14381-14382 14384 14386 14388 14390-14397 14399 14403 14405 14407-14411 14415-14416 14420 14423-14424 14428 14430 14432-14434 14436 14438 14441 14445 14449-14451 14454-14455 14458-14465 14468-14469 14471 14474-14477 14486 14490-14494 14496-14497 14500-14502 14504 14506 14508-14509 14511 14514 14516 14518 14520-14521 14523-14525 14527-14528 14532-14536 14538 14550-14552 14555-14557 14559 14561 14563 14567-14568 14570-14575 14578 14580 14586-14589 14591-14592 14594 14596 14599-14600 14602 14606 14608 14610 14612 14615 14618 14620-14621 14624-14625 14629-14630 14632-14633 14637 14640 14644 14647-14652 14659-14660 14662-14663 14668 14670 14674 14677 14679 14682 14684 14686-14687 14689 14692 14694-14695 14698 14700-14702 14704 14706 14708-14709 14713 14715-14718 14729-14730 14739 14747 14749 14751 14753 14755-14756 14759 14765 14768-14769 14773-14774 14777-14779 14781-14782 14784-14785 14787 14790-14791 14793 14796-14798 14801 14803-14805 14809 14813-14814 14818-14822 14824 14826 14828 14832 14834 14838 14840 14847-14848 14850 14852-14854 14856 14859-14869 14873-14874 14878 14881 14883 14886-14889 14891 14894-14896 14899 14903 14905 14908 14911 14915 14919 14921-14924 14926 14928 14931-14932 14934-14939 14942-14944 14946 14948 14950-14951 14954-14955 14958-14959 14961-14962 14964-14965 14967-14968 14971 14975 14977 14981-14983 14985-14988 14990-14991 14993 14995 14999-15000 15005-15006 15011 15015-15016 15018-15020 15022 15025 15029 15031 15034 15036-15037 15041-15042 15044 15049-15050 15052-15054 15056-15060 15064 15068-15069 15071 15073 15075-15077 15079-15080 15083-15085 15088 15092 15094-15095 15098-15099 15101-15102 15105 15108 15112 15114 15119-15121 15126 15129-15130 15132 15134-15136 15138 15140 15142 15146 15148 15150 15152 15154-15158 15161-15162 15164-15165 15167-15170 15172 15176-15178 15182-15184 15187-15188 15194-15195 15197-15198 15203-15207 15209-15211 15213-15215 15218-15219 15221 15223-15226 15228 15231-15233 15236-15238 15249-15250 15252 15254-15256 15258-15259 15261-15264 15266 15270 15273-15274 15276 15279 15281-15284 15288 15290 15292 15294-15295 15298-15299 15305-15307 15309 15311 15315 15317 15319-15321 15325-15328 15331-15332 15335-15337 15339-15340 15342-15343 15345-15348 15350-15351 15356 15363 15365 15368-15369 15372-15373 15375-15376 15378 15382-15384 15388-15389 15394 15396-15400 15402 15404-15406 15413 15417 15419 15426 15428-15430 15432-15433 15435-15437 15442 15444 15447-15448 15452-15453 15457 15459 15463 15465 15467-15471 15473 15476-15477 15479 15482-15487 15489 15493-15494 15496 15499-15500 15503 15505-15506 15508 15511 15514-15515 15517 15519 15525 15531 15534-15535 15538-15540 15542-15543 15545-15546 15548 15552 15554 15557 15560 15562 15565 15567-15568 15570 15572 15574-15575 15577-15580 15582 15585 15587-15588 15590 15592-15594 15596-15597 15601 15605 15607 15611 15614-15615 15626-15632 15634 15637-15640 15642-15644 15646-15647 15649 15651 15654-15655 15658-15660 15663-15667 15673 15675 15677 15679-15680 15682 15684-15685 15687-15690 15693 15695 15697 15702-15704 15710 15712-15714 15717-15718 15720 15722-15724 15729-15733 15736-15738 15743 15745-15746 15748 15752-15759 15763-15764 15770-15771 15776-15778 15780 15785 15789-15791 15794 15796 15798 15804-15805 15807 15809-15812 15815 15822 15825 15828-15829 15832 15836 15842-15844 15849 15852-15854 15857 15860-15861 15863 15865 15869 15871-15872 15876-15877 15881-15883 15888 15890-15891 15893-15895 15901 15905 15908 15910-15911 15919-15923 15925-15926 15930 15932-15934 15938 15940 15942-15944 15947 15949-15952 15955 15958 15960 15962 15964 15967-15968 15970-15971 15973 15976 15978 15980 15982 15984 15986-15987 15992-15993 15996-15998 16000 16003-16008 16010-16011 16013-16016 16020 16022 16024 16027 16030 16032-16033 16035 16038 16040-16041 16044-16045 16047-16048 16051-16055 16057-16059 16064-16065 16069 16074 16077 16079-16082 16084-16085 16089-16090 16093-16097 16100-16101 16103-16109 16112-16113 16116-16121 16124-16125 16128-16129 16132 16138-16139 16141 16143-16145 16150 16152-16153 16155-16156 16158-16160 16164 16167-16169 16172 16176-16177 16180 16185-16188 16192-16197 16200 16204 16206-16210 16212 16214 16216 16218 16220 16223-16225 16227-16229 16231-16232 16235 16238-16240 16242-16243 16246-16247 16253 16259-16260 16262 16265 16267-16268 16277 16282-16288 16295-16296 16298 16300-16304 16307-16309 16313 16316-16317 16319-16321 16323-16325 16327-16328 16332 16340 16342-16344 16348 16350-16354 16356 16359-16360 16362 16364-16365 16368-16369 16371-16373 16375 16378 16383
# 505eaedaca0a9c6af97560d2c313572a51400343 10.244.1.242:7000@17000 master - 0 1630669982000 14 connected 3277-6553 13113 13115 13120-13122 13127 13129 13145 13160 13164 13172-13173 13178 13186 13190 13194 13205-13206 13210 13212 13215 13220 13223 13234 13236-13237 13244 13250-13251 13255 13260-13262 13264 13268 13270 13273 13282 13288 13293 13297 13306 13325 13330 13338 13344 13346 13356 13363 13370-13371 13385 13390 13392 13397 13400 13411 13429 13434-13435 13438 13442-13443 13448-13449 13456-13457 13468 13478 13486-13487 13492-13493 13499 13503 13515-13516 13519 13523 13531 13534 13539 13545 13551 13567 13574-13575 13578 13591-13592 13597 13600 13605-13606 13609 13617 13620 13628 13634-13635 13637 13639 13642 13644 13646 13653 13656 13658 13663 13668 13671-13672 13685 13687-13688 13692-13695 13698 13709 13712-13713 13721 13725 13727 13730-13731 13740 13745 13747 13753-13754 13756-13757 13764 13769-13770 13777 13785 13789-13790 13793 13798 13812 13815 13817 13829 13839 13842 13845 13848 13852 13858 13862 13864 13866 13877-13878 13881 13900 13907 13917 13920 13926 13932 13940 13948 13953-13954 13961 13967 13976 13979 13981-13982 13984-13985 13990 13999 14003 14012 14029 14033-14034 14038 14040 14044 14051 14061-14062 14077-14078 14080 14087-14088 14109-14110 14112 14115 14118 14120 14122 14131 14133-14134 14141 14143 14151 14160 14163 14165 14169 14172 14176 14182 14189 14194 14197 14209 14211 14214 14218 14220 14223 14225 14229 14233 14247 14254 14257 14262 14282-14283 14287 14290 14296 14298-14301 14304 14326 14330 14338 14340 14343 14350 14357 14364 14375 14406 14412 14419 14421-14422 14425-14426 14437 14440 14444 14448 14453 14456-14457 14470 14472 14479 14481 14484-14485 14487 14495 14498 14505 14507 14512-14513 14517 14519 14531 14545 14547 14554 14558 14560 14565 14577 14584 14597-14598 14601 14605 14607 14609 14616 14627-14628 14635-14636 14638 14643 14646 14654-14656 14658 14664 14669 14671 14673 14676 14680 14690-14691 14693 14697 14699 14711 14719 14721 14723-14724 14727 14732 14736 14740-14742 14746 14760 14762 14766 14776 14802 14807-14808 14810 14812 14817 14829 14844-14845 14849 14858 14879-14880 14884-14885 14890 14893 14900 14912-14914 14927 14929-14930 14940 14947 14949 14953 14957 14963 14969 14972 14974 14976 14980 14992 14997-14998 15003-15004 15008 15012-15013 15017 15026-15027 15035 15043 15045 15047-15048 15062 15066-15067 15074 15086 15089 15097 15100 15124 15128 15137 15139 15144-15145 15147 15149 15159-15160 15166 15180 15186 15189 15192 15202 15212 15216-15217 15220 15227 15229 15239 15241 15257 15265 15267 15272 15289 15291 15296 15304 15314 15329 15349 15353 15355 15357 15359 15361 15364 15367 15377 15379-15380 15385-15386 15390-15392 15395 15408 15412 15414-15415 15418 15421-15422 15427 15434 15439-15440 15446 15451 15454 15458 15460 15474 15480-15481 15490 15492 15495 15498 15512 15518 15523-15524 15528 15533 15537 15547 15550 15555 15571 15584 15586 15595 15598 15600 15610 15613 15617 15620-15621 15635-15636 15641 15650 15652 15668-15670 15674 15676 15681 15705-15707 15709 15711 15740 15749 15760-15761 15767-15768 15779 15784 15786-15788 15792 15797 15801-15802 15806 15816 15827 15833-15834 15840 15845 15847-15848 15855 15866 15868 15870 15878 15884 15886 15889 15892 15896-15897 15903 15912 15914-15918 15928 15935 15937 15939 15954 15956-15957 15965 15972 15975 15977 15979 15981 15985 15991 15994 15999 16002 16017-16019 16039 16049 16060 16068 16070 16076 16087-16088 16092 16099 16102 16110-16111 16114 16122 16127 16134-16135 16149 16151 16154 16162 16165-16166 16170 16173 16182 16184 16191 16198 16201 16213 16217 16219 16221 16233 16237 16241 16245 16251-16252 16254-16258 16270 16272 16278 16280-16281 16290 16293-16294 16297 16305 16314 16330 16333-16334 16339 16349 16358 16361 16367 16370 16379
# e13da105c5f638f2e4fee3017fc8d8b5ee15d728 10.244.1.230:7000@17000 master,fail - 1630669623335 1630669622000 5 connected
# 57b13127baa66b3a54ede59e267f32eeb8435ea7 10.244.0.92:7000@17000 master - 0 1630669982973 10 connected 9830-13108 13114 13119 13123 13139 13151-13152 13158 13165 13167-13169 13176 13184-13185 13187 13192 13198 13208 13228 13241 13243 13267 13276 13285-13286 13290 13296 13305 13308 13322-13324 13326 13329 13333 13341 13343 13351-13352 13365 13372 13374 13378 13383 13388 13391 13395 13404-13406 13409-13410 13413 13416-13417 13432 13439 13446 13453 13455 13459 13462-13463 13466-13467 13469 13473 13479 13482-13484 13489 13491 13494 13496 13510 13517 13521 13525-13527 13529 13535 13547 13552 13562 13564 13569 13577 13585 13588 13596 13599 13602 13607 13631 13636 13641 13643 13647 13649 13657 13660 13675-13677 13680 13701 13703 13706 13720 13728 13733 13735-13736 13742 13744 13746 13751-13752 13766 13779 13787-13788 13796-13797 13805 13810 13818 13820 13822 13825 13831 13834 13837-13838 13840 13849-13851 13853 13856 13859 13861 13863 13865 13868 13870 13873-13874 13880 13909 13915-13916 13922 13931 13933-13934 13937 13942 13952 13959-13960 13965 13971 13975 13986 13988 13991-13992 13995 14000 14007 14014 14020 14025 14027-14028 14037 14066-14067 14069-14071 14074 14083 14091-14092 14105 14125 14127 14139 14152-14154 14159 14173 14179 14184 14201-14203 14219 14221 14227 14235 14239 14243 14248 14253 14263 14265 14270-14271 14273 14280 14284-14286 14308 14313 14323 14337 14339 14341 14345-14346 14351 14353 14356 14360-14361 14369 14374 14379-14380 14385 14389 14400 14404 14414 14418 14431 14435 14442-14443 14446-14447 14473 14483 14488 14499 14503 14515 14522 14529-14530 14537 14540-14541 14543-14544 14546 14549 14553 14562 14579 14590 14593 14595 14603 14613 14617 14619 14622 14634 14642 14661 14665 14667 14672 14678 14681 14683 14688 14696 14707 14712 14714 14720 14728 14733-14734 14737 14743-14744 14748 14752 14754 14761 14767 14770-14772 14783 14786 14788-14789 14792 14795 14800 14815 14823 14825 14837 14846 14851 14855 14857 14875 14877 14892 14898 14901-14902 14904 14906 14909 14916-14917 14925 14933 14945 14970 14973 14978 14989 14994 14996 15014 15021 15023-15024 15030 15033 15040 15063 15065 15070 15072 15081 15087 15090 15093 15096 15104 15106-15107 15109 15111 15115 15118 15122-15123 15127 15131 15141 15143 15151 15174 15179 15181 15190-15191 15196 15201 15235 15240 15244-15246 15248 15251 15253 15260 15268 15280 15293 15297 15302-15303 15316 15330 15333 15338 15341 15352 15354 15360 15362 15366 15374 15387 15393 15403 15409 15411 15420 15424 15441 15443 15445 15450 15455 15461-15462 15466 15472 15475 15478 15491 15497 15502 15509 15520-15522 15527 15529-15530 15536 15541 15549 15553 15559 15563 15569 15576 15581 15591 15599 15606 15608-15609 15616 15618 15622 15624-15625 15633 15656 15661-15662 15671-15672 15678 15683 15686 15691 15694 15698 15700-15701 15715 15719 15721 15725 15727-15728 15734-15735 15739 15741 15747 15750 15765-15766 15769 15774 15782 15793 15808 15813-15814 15817-15818 15820-15821 15823-15824 15830 15835 15838 15846 15850 15856 15859 15864 15867 15873 15875 15879-15880 15899-15900 15904 15906 15909 15924 15927 15929 15936 15941 15945-15946 15953 15959 15961 15966 15995 16001 16012 16021 16023 16025-16026 16034 16036-16037 16042-16043 16046 16050 16056 16061 16067 16071-16073 16075 16086 16091 16115 16123 16130 16136 16142 16146-16148 16157 16161 16163 16174-16175 16178 16189-16190 16202-16203 16222 16234 16236 16244 16248-16250 16261 16263-16264 16266 16271 16274-16276 16279 16291-16292 16299 16306 16310 16315 16318 16322 16326 16329 16335-16336 16338 16341 16345-16347 16355 16363 16366 16374 16376 16381-16382
